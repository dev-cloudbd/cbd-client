#!/bin/bash

# if no arg exit with 1
[[ -z "$1" ]] && exit 1

prefix=@prefix@
sysconfdir=@sysconfdir@
file="$sysconfdir/cloudbd/cbdtab"

# if no cbdtab, exit
[[ ! -f "$file" ]] && exit 0

while read -r line; do
        # skip comments and blank lines
        if [[ "$line" =~ ^[[:space:]]*#.*$ ]] || [[ "$line" =~ ^[[:space:]]*$ ]]; then continue; fi

        # break into individual elements
        read -ra arr <<<"$line"

        # check for invalid file
        if ((${#arr[@]} < 2)); then exit 1; fi

        # check for argument
        [[ "${arr[0]}" =~ $1 ]] && echo "ID_CLOUDBD=${arr[1]}" && exit 0
done < "$file"

exit 0
